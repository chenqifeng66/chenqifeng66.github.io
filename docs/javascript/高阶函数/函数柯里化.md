---
title: æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰
---

## ä»€ä¹ˆæ˜¯æŸ¯é‡ŒåŒ–

æŸ¯é‡ŒåŒ–æ˜¯ä¸€ç§å‡½æ•°çš„è½¬æ¢æ–¹æ³•

å®ƒæ˜¯å°†ä¸€ä¸ªå‡½æ•°ä»å¯è°ƒç”¨çš„ `f(a,b,c)` è½¬æ¢ä¸ºå¯è°ƒç”¨çš„ `f(a)(b)(c)`

## ä¸ºä»€ä¹ˆéœ€è¦æŸ¯é‡ŒåŒ–

å¯ä»¥å›ºå®šå‰å‡ ä¸ªå‚æ•°ï¼Œç”Ÿæˆå®ç°éƒ¨åˆ†åŠŸèƒ½çš„å‡½æ•°

### ğŸŒ°

ä¸€ä¸ªæ—¥å¿—å‡½æ•°

```js
function log(date, type, message) {
  const hour = date.getHours();
  const month = date.getMonths();
  return `${hour}:${month} ${type} ${message}`;
}

log(new Date(), "DEBUG", "some bug"); // hh:mm DEBUG some bug
```

æŸ¯é‡ŒåŒ– - éƒ¨åˆ†åŠŸèƒ½å‡½æ•°

```js
const curryLog = curry(log);
// å›ºå®šæ—¥æœŸçš„æ—¥å¿—å‡½æ•°
const logNow = curryLog(new Date());
logNow("DEBUG", "some bug"); // hh:mm DEBUG some bug
// å›ºå®šæ—¥æœŸã€ç±»å‹çš„æ—¥å¿—å‡½æ•°
const logNowDebug = curryLog(new Date(), "DEBUG");
logNowDebug("some bug"); // hh:mm DEBUG some bug
```

## ç®€å•å®ç°

ä¸€ä¸ªç®€å•çš„åŠ æ³•å‡½æ•°

```js
function sum(a, b, c) {
  return a + b + c;
}
```

å°† `sum(1,2,3)` å‡½æ•°è½¬ä¸º `sum(1)(2)(3)` è°ƒç”¨

### æ€è€ƒ

æŸ¯é‡ŒåŒ–å‡½æ•°é€»è¾‘ï¼š

1. æ¥æ”¶ä¸€ä¸ªå‡½æ•°
2. è¿”å›ä¸€ä¸ªå‡½æ•°/è°ƒç”¨åŸå‡½æ•°çš„ç»“æœ
   1. è¿”å›ä¸€ä¸ªå‡½æ•°ï¼šåœ¨æœ€åä¸€ä¸ªå‚æ•°ä¹‹å‰
   2. è¿”å›è°ƒç”¨åŸå‡½æ•°çš„ç»“æœï¼šåœ¨æœ€åä¸€ä¸ªå‚æ•°çš„æ—¶å€™

```js
function curry(func) {
  return function (a) {
    return function (b) {
      return function (c) {
        func(a, b, c);
      };
    };
  };
}

const currySum = curry(sum);
currySum(1)(2)(3); // 6
```

ä»ä»¥ä¸Šä»£ç çš„å®ç°å¯ä»¥çœ‹å‡ºï¼ŒåŸå‡½æ•°æ¥æ”¶å¤šå°‘ä¸ªå‚æ•°ï¼Œ`curry` å‡½æ•°å°±å¾—è¿”å›å¤šå°‘å±‚

```js
function curry(func) {
  return function (a) {
    return function (b) {
      // .... æœ€ç»ˆè°ƒç”¨åŸå‡½æ•°
    };
  };
}
```

### å­˜åœ¨çš„é—®é¢˜

1. ä¸çµæ´»ï¼Œæ— æ³•é€šç”¨ã€‚`curry` å‡½æ•°å†…éƒ¨æ— æ³•æ ¹æ®åŸå‡½æ•°å‚æ•°ä¸ªæ•°æ¥é€‚åº”
2. æ— æ³•ä»¥åŸå‡½æ•°çš„æ–¹å¼è°ƒç”¨æŸ¯é‡ŒåŒ–åçš„å‡½æ•°ã€‚æ—¢å¯ä»¥ä»¥ `currySum(1,2,3)` çš„æ–¹å¼è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥ä»¥ `currySum(1)(2)(3)` çš„æ–¹å¼è°ƒç”¨

## æ”¹è¿›

- å°†ä¼ å…¥çš„å‚æ•°ä¸åŸå‡½æ•°æ‰€éœ€çš„å‚æ•°æ¯”è¾ƒ
  - å½“ä¼ å…¥å‚æ•°ä¸ªæ•°å¤šäºæˆ–ç­‰äºåŸå‡½æ•°æ‰€éœ€å‚æ•°æ—¶ï¼Œä»¥åŸå‡½æ•°æ–¹å¼è°ƒç”¨
  - å½“ä¼ å…¥å‚æ•°ä¸ªæ•°å°‘äºåŸå‡½æ•°æ‰€éœ€å‚æ•°æ—¶ï¼Œä»¥æŸ¯é‡ŒåŒ–æ–¹å¼è°ƒç”¨

æ ¸å¿ƒï¼š**æ”¶é›†å‚æ•°ï¼Œæœ€ç»ˆå°†æ‰€æœ‰å‚æ•°ä¼ å…¥åŸå‡½æ•°**

```js
function curry(func) {
  return function curried(...arg1) {
    // func.length è·å–å‡½æ•°æ‰€éœ€å‚æ•°ä¸ªæ•°
    if (arg1.length >= func.length) {
      // ã€ä¼ å…¥å‚æ•° >= åŸå‡½æ•°æ‰€éœ€çš„å‚æ•°ã€‘æ—¶åˆ™ä»¥åŸå‡½æ•°è°ƒç”¨
      return func.apply(this, arg1);
    } else {
      // ã€ä¼ å…¥å‚æ•° < åŸå‡½æ•°æ‰€éœ€çš„å‚æ•°ã€‘ä»¥æŸ¯é‡ŒåŒ–æ–¹å¼è°ƒç”¨
      // è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†åç»­å‚æ•°æ‹¼æ¥ï¼Œæœ€ç»ˆä»¥åŸå‡½æ•°è°ƒç”¨
      return function (...arg2) {
        return curried.apply(this, arg1.concat(arg2));
      };
    }
  };
}

const currySum = curry(sum);
currySum(1, 2, 3); // 6
currySum(1, 2)(3); // 6
currySum(1)(2)(3); // 6
```

## æ€»ç»“

æŸ¯é‡ŒåŒ–ï¼šæŠŠæ¥æ”¶å¤šå‚çš„å‡½æ•°è½¬åŒ–æˆå¯ä»¥é€ä¸ªè°ƒç”¨å•ä¸ªå‚æ•°å¹¶è¿”å›æ¥æ”¶å‰©ä¸‹å‚æ•°çš„å‡½æ•°

åº”ç”¨ï¼š ä½¿ç”¨æŸ¯é‡ŒåŒ–å¯ä»¥æ›´å®¹æ˜“è·å–éƒ¨åˆ†åŠŸèƒ½å‡½æ•°ï¼Œå¦‚ğŸŒ°ä¸­çš„ã€æ—¥å¿—å‡½æ•°ã€‘

æ³¨æ„ï¼š**åªå…è®¸è½¬åŒ–ç¡®å®šå‚æ•°ä¸ªæ•°çš„å‡½æ•°**
