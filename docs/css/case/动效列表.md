---
title: 动效列表
---

::: vue-demo 效果展示

```vue
<template>
  <h2>待办事项</h2>
  <div class="list" ref="listRef">
    <div
      class="item"
      v-for="(item, index) in list"
      :key="item.id"
      :class="{
        leave: delIndex == index,
        up: delIndex != -1 && delIndex < index,
        down: topIndex > index,
      }"
    >
      <div class="left">{{ item.content }}</div>
      <div class="right">
        <button @click="top(index, $event)">置顶</button>
        <button @click="del(index, $event)">删除</button>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  data: () => ({
    list: [
      {
        id: "1",
        content: "事项一",
      },
      {
        id: "2",
        content: "事项二",
      },
      {
        id: "3",
        content: "事项三",
      },
      {
        id: "4",
        content: "事项四",
      },
      {
        id: "5",
        content: "事项五",
      },
      {
        id: "6",
        content: "事项六",
      },
    ],
    animationTime: 500,
    delIndex: -1,
    topIndex: -1,
  }),
  computed: {
    // 是否正在操作节点
    isHandle() {
      return this.delIndex == -1 && this.topIndex == -1 ? false : true;
    },
    // 当前执行操作节点
    nowHandleNode() {
      if(this.isHandle){
        if()
      }
    },
  },
  methods: {
    // 实现方式一：js
    // del(index, e) {
    //   const childrens = this.$refs.listRef.children;
    //   //
    //   const length = childrens.length;
    //   for (let i = index; i < length; i++) {
    //     if (i == index) {
    //       childrens[i].classList.add("leave");
    //     } else if (i > index) {
    //       childrens[i].classList.add("up");
    //       setTimeout(() => {
    //         childrens[i].classList.remove("up");
    //       }, this.animationTime);
    //     }
    //   }
    //   setTimeout(() => {
    //     this.list.splice(index, 1);
    //   }, this.animationTime);
    // },
    // 实现方式二：vue变量控制
    del(index) {
      // 当前已有元素在执行操作，退出
      if (this.isHandle) return;
      this.delIndex = index;
      setTimeout(() => {
        this.list.splice(index, 1);
        this.delIndex = -1;
      }, this.animationTime);
    },
    top(index, e) {
      // 当前已有元素在执行操作，退出
      if (this.isHandle) return;
      this.topIndex = index;
      this.$refs.listRef.children[index].style.transition = "all 0.5s";
      this.$refs.listRef.children[index].style.transform = `translateY(-${
        30 * index
      }px)`;
      setTimeout(() => {
        this.$refs.listRef.children[index].style.transition = "";
        this.$refs.listRef.children[index].style.transform = "";
        const item = this.list[index];
        this.list.splice(index, 1);
        this.list.unshift(item);
        this.topIndex = -1;
      }, this.animationTime);
    },
  },
};
</script>

<style>
.list {
  display: flex;
  flex-direction: column;
}
.list .item {
  width: 200px;
  height: 30px;
  display: flex;
  justify-content: space-between;
}
.up {
  transition: all 0.5s;
  transform: translateY(-30px);
}
.leave {
  transition: all 0.5s;
  transform: translateX(200px);
  opacity: 0;
}
.down {
  transition: all 0.5s;
  transform: translateY(30px);
}
</style>
```

:::

**实现思路**

1. box 伪元素::before 实现渐变背景

```css
.box::before {
  content: "";
  position: absolute;
  width: 80px;
  height: 120%;
  background: linear-gradient(#00ccff, #d500f9);
}
```

2. box 伪元素::before 实现旋转动画

```css
.box::before {
  animation: rotate 4s linear infinite;
}

@keyframes rotate {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}
```

3. box 伪元素::after 盖住渐变背景

```css
.box::after {
  content: "";
  position: absolute;
  /* 简写用法: 等价于 top:5px; left:5px; bottom:5px; right:5px; */
  inset: 5px;
  background: #0e1538;
  border-radius: 10px;
}
```

4. box 超出隐藏

```css
.box {
  overflow: hidden;
}
```

5. 文字调到上层

```css
.box h2 {
  z-index: 1;
}
```
